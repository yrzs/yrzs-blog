---
title: "B+tree"
date: 2022-07-13T16:02:42+08:00
draft: true
---

在InnoDB中 [数据页](/post/2022/7/12/mysql-innodb) 有七个组成部分,各个数据页可以组成一个双向链表，
而每个数据页中的记录会按照主键值从小到大的顺序组成一个 _单向链表_ ,每个数据页都会为存储在它里边儿的数据生成一个 _页目录_ ，
在通过主键查找某条记录的时候可以在页目录中使用 _二分法_ 快速定位到对应的槽（slot）,然后遍历该slot对应分组中的记录即可快速找到指定的记录。

### 没有索引的查找

#### 在一个页中的查找
假设目前表中的记录比较少，所有的记录都可以被放到一个页中，在查找记录的时候可以根据搜索条件的不同分为两种情况：
 * 以主键为搜索条件
 >>> 在 _页目录_ 中使用 _二分法_ 快速定位到对应的slot... 
 * 以其他列作为搜索条件
 >>> 因为 _数据页_ 中并没有对非主键列建立所谓的 _页目录_ ，所以我们无法通过 _二分法_ 快速定位到相应的slot。
 >>> 这种情况下只能从 _最小记录_ 开始遍历单链表中的每条记录，然后对比每条记录是不是符合搜索条件。（效率非常低下）

#### 在很多页中查找
真实情况下表中存放的记录都是非常多的，需要很多数据页来存储这些记录，在很多页中查找记录可分为两个步骤：
 > 1. 定位到记录所在的页
 > 2. 从所在的页中查找相应的记录 

在没有索引的情况下，不论是根据主键列还是其他列进行查找，
<font color=orangeRed>由于我们并不能快速的定位到记录所在的页，所以只能从第一个页沿着双向链表一直往下找，在每一页中根据刚才所说的查找方式去查找置顶的记录。</font>
（非常耗时的操作）

### 索引
